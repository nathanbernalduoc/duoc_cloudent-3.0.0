{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./login.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./login.component.css?ngResource\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nlet LoginComponent = class LoginComponent {\n  fb;\n  router;\n  loginForm;\n  msg = '';\n  constructor(fb, router) {\n    this.fb = fb;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.loginForm = this.fb.group({\n      user: ['', [Validators.required, Validators.email]],\n      pass: ['', Validators.required]\n    });\n  }\n  submitLogin() {\n    if (this.loginForm.valid) {\n      if (this.loginForm.get('user').value == 'nathanbernal@gmail.com' && this.loginForm.get('pass')?.value == '123') {\n        localStorage.setItem('session', JSON.stringify({\n          'user': this.loginForm.get('pass')?.value\n        }));\n        this.router.navigate(['main', {\n          'isSessionCurrent': true\n        }]);\n      } else {\n        var u = localStorage.getItem('usuarios');\n        if (u != undefined) {\n          var usuarioList = JSON.parse(u);\n          if (usuarioList.length > 0) {\n            for (var i = 0; i < usuarioList.length; i++) {\n              if (usuarioList[i].usuario.trim() == this.loginForm.get('user').value.trim() && usuarioList[i].contrasena.trim() == this.loginForm.get('pass').value.trim()) {\n                localStorage.setItem('session', JSON.stringify({\n                  'user': this.loginForm.get('pass')?.value\n                }));\n                this.router.navigate(['main', {\n                  'isSessionCurrent': true\n                }]);\n              }\n            }\n          }\n        }\n        this.msg = 'Las credenciales proporcionadas son incorrectas.';\n        setTimeout(() => {\n          this.msg = \"\";\n        }, 3000);\n      }\n    }\n  }\n  getContrasena() {\n    var user = this.loginForm.get('user').value;\n    if (user.trim() == '') {\n      alert('No es posible determinar su contraseña, se requiere su email en el campo usaurio.');\n      return;\n    }\n    var u = localStorage.getItem('usuarios');\n    if (u != undefined) {\n      var usuarioList = JSON.parse(u);\n      if (usuarioList.length > 0) {\n        for (var i = 0; i < usuarioList.length; i++) {\n          if (usuarioList[i].usuario.trim() == user) {\n            alert('Atención: \\nSu contraseña es ' + usuarioList[i].contrasena);\n          }\n        }\n      }\n    }\n  }\n  static ctorParameters = () => [{\n    type: FormBuilder\n  }, {\n    type: Router\n  }];\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule],\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], LoginComponent);\nexport { LoginComponent };","map":{"version":3,"names":["Component","CommonModule","FormBuilder","ReactiveFormsModule","Validators","Router","LoginComponent","fb","router","loginForm","msg","constructor","ngOnInit","group","user","required","email","pass","submitLogin","valid","get","value","localStorage","setItem","JSON","stringify","navigate","u","getItem","undefined","usuarioList","parse","length","i","usuario","trim","contrasena","setTimeout","getContrasena","alert","__decorate","selector","standalone","imports","template","__NG_CLI_RESOURCE__0"],"sources":["/Users/jonathanbernal/Projects/Duoc/fullstack_2/duoc_cloudent-3.0.0/src/app/componentes/login/login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\n\n\n@Component({\n  selector: 'app-login',\n  standalone: true,\n  imports: [CommonModule,ReactiveFormsModule],\n  templateUrl: './login.component.html',\n  styleUrl: './login.component.css'\n})\n\nexport class LoginComponent {\n\n  loginForm! : FormGroup;\n  msg:string = '';\n\n  constructor(private fb: FormBuilder,private router:Router) {}\n  \n  ngOnInit(): void {\n    this.loginForm = this.fb.group({\n      user: ['', [Validators.required, Validators.email]],\n      pass: ['', Validators.required]\n    });\n  }\n\n  submitLogin() {\n\n    if (this.loginForm.valid) {\n\n      if (this.loginForm.get('user')!.value == 'nathanbernal@gmail.com' && this.loginForm.get('pass')?.value == '123') {\n        localStorage.setItem('session', JSON.stringify({ 'user': this.loginForm.get('pass')?.value }) );\n        this.router.navigate(['main', {'isSessionCurrent': true}]);\n      } else {\n        var u = localStorage.getItem('usuarios');\n        if (u != undefined) {\n          var usuarioList = JSON.parse(u);\n          if (usuarioList.length>0) {\n            for(var i=0; i<usuarioList.length; i++) {\n              if (usuarioList[i].usuario.trim() == this.loginForm.get('user')!.value.trim() && usuarioList[i].contrasena.trim() == this.loginForm.get('pass')!.value.trim()) {\n                localStorage.setItem('session', JSON.stringify({ 'user': this.loginForm.get('pass')?.value }) );\n                this.router.navigate(['main', {'isSessionCurrent': true}]);\n              }\n            }\n          }\n        }\n        this.msg = 'Las credenciales proporcionadas son incorrectas.';\n        setTimeout(() => { this.msg = \"\"; }, 3000);\n      }\n\n    }\n\n  }\n\n  getContrasena(): void {\n\n    var user = this.loginForm.get('user')!.value;\n\n    if (user.trim() == '') {\n      alert('No es posible determinar su contraseña, se requiere su email en el campo usaurio.');\n      return ;\n    }\n\n    var u = localStorage.getItem('usuarios');\n    if (u != undefined) {\n      var usuarioList = JSON.parse(u);\n      if (usuarioList.length>0) {\n        for(var i=0; i<usuarioList.length; i++) {\n          if (usuarioList[i].usuario.trim() == user) {\n            alert('Atención: \\nSu contraseña es '+usuarioList[i].contrasena);\n          }\n        }\n      }\n    }\n\n  }\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}